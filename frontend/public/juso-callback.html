<!DOCTYPE html>
<html>
<head>
    <title>주소 검색 콜백</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <script>
        // 이 스크립트는 주소 API 팝업이 주소 선택 후 리다이렉트될 때 실행됩니다.
        // 주소 API가 쿼리 파라미터로 주소 데이터를 넘겨줍니다.
        const urlParams = new URLSearchParams(window.location.search);
        const addressData = {};

        for (const [key, value] of urlParams.entries()) {
            addressData[key] = value;
        }

        // 팝업을 연 부모 창 (너의 React 앱)으로 데이터 전송 (postMessage)
        if (window.opener) {
            // ⭐ 중요: 'http://localhost:3000'은 너의 React 앱 실제 도메인과 포트로 변경
            // (개발 환경: CRA 기본 3000, 또는 네가 설정한 포트)
            window.opener.postMessage({ type: 'juso_selected', data: addressData }, 'http://localhost:3000');
            window.close(); // 데이터를 보낸 후 팝업 창 닫기
        } else {
            console.error("Window opener is not available.");
        }
    </script>
</body>
</html>